
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quick Start &#8212; Auditree Framework 1.17.0 documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Design Principles" href="design-principles.html" />
    <link rel="prev" title="Auditree framework documentation" href="index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="design-principles.html" title="Design Principles"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Auditree framework documentation"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Auditree Framework 1.17.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Quick Start</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="quick-start">
<span id="id1"></span><h1>Quick Start<a class="headerlink" href="#quick-start" title="Permalink to this headline">¶</a></h1>
<p>If any terminology used in this quick start guide is unclear, have a look at the
<a class="reference internal" href="design-principles.html#design-principles"><span class="std std-ref">Design Principles</span></a> documentation for clarification.</p>
<p>The Auditree framework requires at least one directory containing fetchers and
checks.  Let’s use the fetchers and checks packaged up in the <code class="docutils literal notranslate"><span class="pre">demo</span></code> folder
of the <code class="docutils literal notranslate"><span class="pre">auditree-framework</span></code> project as an example.  First things first, we need
to ensure that we have a proper Python virtual environment configured and running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd demo
$ python -m venv venv
$ . ./venv/bin/activate
$ pip install -r requirements.txt
</pre></div>
</div>
<p>A typical execution consists of two phases:</p>
<ul>
<li><p>Running the fetchers:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ compliance --fetch --evidence local -C auditree_demo.json -v
</pre></div>
</div>
<p>Running this command generates a Git repository locally at <code class="docutils literal notranslate"><span class="pre">/$TMPDIR/compliance</span></code>
and it executes all fetchers found within the <code class="docutils literal notranslate"><span class="pre">demo_example</span></code> package.</p>
</li>
<li><p>Running the checks:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ compliance --check demo.arboretum.accred,demo.custom.accred --evidence local -C auditree_demo.json -v
</pre></div>
</div>
<p>Running this command executes checks associated with the specified accreditations,
creates check result reports in the evidence locker, executes notifiers (you can
see the messages in the output), updates the evidence locker README with a check
report table of contents and generates a file in the evidence locker root called
<code class="docutils literal notranslate"><span class="pre">check_results.json</span></code> with detailed information about the check execution.</p>
</li>
</ul>
<div class="section" id="advanced-topics">
<h2>Advanced Topics<a class="headerlink" href="#advanced-topics" title="Permalink to this headline">¶</a></h2>
<div class="section" id="configuration">
<h3>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h3>
<p>There are two configuration files used to configure the execution of the
<code class="docutils literal notranslate"><span class="pre">auditree-framework</span></code>.  The main configuration file can be named anything you
like.  In the case of our demo we’ve chosen the name <code class="docutils literal notranslate"><span class="pre">auditree-demo.json</span></code>.  There
is also a check to accreditation mapping configuration file and this file must be
named <code class="docutils literal notranslate"><span class="pre">controls.json</span></code>.</p>
</div>
<div class="section" id="controls-json">
<h3>controls.json<a class="headerlink" href="#controls-json" title="Permalink to this headline">¶</a></h3>
<p>The mapping between a check (check class path) and accreditations
(a list of accreditations) happens in the <code class="docutils literal notranslate"><span class="pre">controls.json</span></code> configuration
file.  Each new check must be included in <code class="docutils literal notranslate"><span class="pre">controls.json</span></code> in
order to be considered for execution by the Auditree framework.
Note that this is not the case for fetchers, where all are executed.
As an example, the format for <code class="docutils literal notranslate"><span class="pre">controls.json</span></code> is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;chk_pkg.chk_cat_foo.checks.chk_module_foo.FooCheckClass&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;accred.one&quot;</span><span class="p">],</span>
  <span class="s2">&quot;chk_pkg.chk_cat_bar.checks.chk_module_bar.BarCheckClass&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;accred.one&quot;</span><span class="p">,</span> <span class="s2">&quot;accred.two&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="remote-evidence-locker">
<h3>Remote Evidence Locker<a class="headerlink" href="#remote-evidence-locker" title="Permalink to this headline">¶</a></h3>
<p>Storing and using evidence in a Git remote hosting service repository is achievable
by using the <code class="docutils literal notranslate"><span class="pre">--evidence</span></code> option with settings of either <code class="docutils literal notranslate"><span class="pre">no-push</span></code> or
<code class="docutils literal notranslate"><span class="pre">full-remote</span></code> along with the locker configuration URL similar to the one found
in the <code class="docutils literal notranslate"><span class="pre">auditree_demo.json</span></code>.  Set the locker URL to the URL of your remote
evidence locker repository and use <code class="docutils literal notranslate"><span class="pre">--evidence</span> <span class="pre">no-push</span></code> to pull down a remote
evidence locker only or <code class="docutils literal notranslate"><span class="pre">--evidence</span> <span class="pre">full-remote</span></code> to pull down and push to a
remote evidence locker.  Finally you’ll need to configure your credentials file
with the appropriate personal access token for your Git remote hosting service.  The
credentials file defaults to <code class="docutils literal notranslate"><span class="pre">~/.credentials</span></code> or use the <code class="docutils literal notranslate"><span class="pre">--creds-path</span></code> option
to point elsewhere.  Valid section headings for Git remote hosting services in your
credentials are <code class="docutils literal notranslate"><span class="pre">github</span></code>, <code class="docutils literal notranslate"><span class="pre">github_enterprise</span></code>, <code class="docutils literal notranslate"><span class="pre">bitbucket</span></code>, and <code class="docutils literal notranslate"><span class="pre">gitlab</span></code>.
Using <code class="docutils literal notranslate"><span class="pre">github</span></code> as an example, add the following to your credentials file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">github</span><span class="p">]</span>
<span class="n">token</span><span class="o">=</span><span class="n">XXX</span>
</pre></div>
</div>
<p>Once the credentials are set up, you can run fetchers and checks in <code class="docutils literal notranslate"><span class="pre">no-push</span></code>
or <code class="docutils literal notranslate"><span class="pre">full-remote</span></code> mode.</p>
<p>For a fetcher execution the Auditree framework will <code class="docutils literal notranslate"><span class="pre">pull</span></code> the repository to
<code class="docutils literal notranslate"><span class="pre">/$TMPDIR/compliance</span></code> (only if it does not exist already), and then run all
of the fetchers.  If evidence time to live (TTL) has not expired for a given
evidence file then the associated fetcher will perform a no-op run.</p>
<p>It is important to note that when using the <code class="docutils literal notranslate"><span class="pre">no-push</span></code> option, your evidence
locker will not be pushed to the remote evidence locker at the end of your fetcher
execution.  This is handy for testing the current state of the evidence in your
evidence locker:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ compliance --fetch --evidence no-push -C auditree_demo.json
</pre></div>
</div>
<p>However using the <code class="docutils literal notranslate"><span class="pre">full-remote</span></code> option will push your evidence locker to the
remote locker:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ compliance --fetch --evidence full-remote -C auditree_demo.json
</pre></div>
</div>
<p>Likewise once the credentials are set up and you’ve executed your fetchers in
either <code class="docutils literal notranslate"><span class="pre">no-push</span></code> or <code class="docutils literal notranslate"><span class="pre">full-remote</span></code> mode you can now execute your checks in
<code class="docutils literal notranslate"><span class="pre">no-push</span></code> mode which will not push the evidence locker to the remote evidence
locker:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ compliance --check demo.arboretum.accred,demo.custom.accred --evidence no-push -C auditree_demo.json
</pre></div>
</div>
<p>However using the <code class="docutils literal notranslate"><span class="pre">full-remote</span></code> option will push your evidence locker to the
remote locker:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ compliance --check demo.arboretum.accred,demo.custom.accred --evidence full-remote -C auditree_demo.json
</pre></div>
</div>
</div>
<div class="section" id="notifications">
<h3>Notifications<a class="headerlink" href="#notifications" title="Permalink to this headline">¶</a></h3>
<p>You can also configure the check run to send notifications to Slack,
GitHub (as issues), PagerDuty, the evidence locker, Findings, and the terminal
console which is the default.  To do this add the desired notifier(s) to your
configuration file similar to <code class="docutils literal notranslate"><span class="pre">auditree_demo.json</span></code> and use the <code class="docutils literal notranslate"><span class="pre">--notify</span></code>
option as part of the check execution.  For example, you can use the
<code class="docutils literal notranslate"><span class="pre">slack</span></code> notifier to send Slack alerts:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ compliance --check demo.custom.accred --evidence no-push -C auditree_demo.json --notify slack
</pre></div>
</div>
<p>This will run only <code class="docutils literal notranslate"><span class="pre">demo.custom.accred</span></code> accreditation in <code class="docutils literal notranslate"><span class="pre">no-push</span></code> mode and
Slack notifications for this accreditation will be sent to the channels and
individuals specified in your configuration.  In addition to configuring the
notifiers, notifier specific credentials also need to be added to your credentials
file.  For example, for Slack you can either provide a webhook or a token:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">slack</span><span class="p">]</span>
<span class="n">webhook</span><span class="o">=</span><span class="n">XXX</span>
</pre></div>
</div>
<p>Slack webhooks cannot be used for posting messages into private channels. If you
need this, we recommend to use a Slack app token instead:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">slack</span><span class="p">]</span>
<span class="n">token</span><span class="o">=</span><span class="n">XXX</span>
</pre></div>
</div>
<p>Each notifier requires its own configuration and credentials and you can specify
as many notifiers as you want on any given check execution.</p>
</div>
</div>
<div class="section" id="recommendations">
<h2>Recommendations<a class="headerlink" href="#recommendations" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Use the example project showcased above as a template for your configuration/execution</p></li>
</ul>
<p>repository/project:</p>
<blockquote>
<div><ul class="simple">
<li><p>Put your <code class="docutils literal notranslate"><span class="pre">fetchers</span></code> and <code class="docutils literal notranslate"><span class="pre">checks</span></code> in separate folders. Technically, there
is no rule about fetcher and check organization, but it is a good guideline to
follow.  As you add more fetchers and checks you can create more sub-directories.</p></li>
<li><p>Create a <code class="docutils literal notranslate"><span class="pre">templates</span></code> folder for your check report templates.  Remember that
they should have the same path as your report evidence.</p></li>
<li><p>Execute fetchers and checks separately.</p></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><p>When debugging, always use the safest options for the Auditree framework. This
should mitigate unintended slack notifications or commits to your remote evidence
locker.</p>
<ul>
<li><p>It doesn’t hurt to delete your local evidence locker <code class="docutils literal notranslate"><span class="pre">compliance</span></code> folder.
This ensures a clean execution and should mirror an official run from a CI
tool.</p></li>
<li><p>Notify using the <code class="docutils literal notranslate"><span class="pre">stdout</span></code> notifier which is the default.</p></li>
<li><p>Only use <code class="docutils literal notranslate"><span class="pre">--evidence</span> <span class="pre">local</span></code> or <code class="docutils literal notranslate"><span class="pre">evidence</span> <span class="pre">no-push</span></code> options.</p></li>
</ul>
</li>
</ul>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Quick Start</a><ul>
<li><a class="reference internal" href="#advanced-topics">Advanced Topics</a><ul>
<li><a class="reference internal" href="#configuration">Configuration</a></li>
<li><a class="reference internal" href="#controls-json">controls.json</a></li>
<li><a class="reference internal" href="#remote-evidence-locker">Remote Evidence Locker</a></li>
<li><a class="reference internal" href="#notifications">Notifications</a></li>
</ul>
</li>
<li><a class="reference internal" href="#recommendations">Recommendations</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Auditree framework documentation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="design-principles.html"
                        title="next chapter">Design Principles</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/quick-start.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="design-principles.html" title="Design Principles"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Auditree framework documentation"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Auditree Framework 1.17.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Quick Start</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2021, IBM.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.5.4.
    </div>
  </body>
</html>
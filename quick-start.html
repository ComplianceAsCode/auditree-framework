
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quick Start &#8212; Auditree Framework 1.2.0 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Design Principles" href="design-principles.html" />
    <link rel="prev" title="Auditree framework documentation" href="index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="design-principles.html" title="Design Principles"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Auditree framework documentation"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Auditree Framework 1.2.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Quick Start</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="quick-start">
<span id="id1"></span><h1>Quick Start<a class="headerlink" href="#quick-start" title="Permalink to this headline">¶</a></h1>
<p>There might be some terms in this quick start that you don’t fully
understand, so you may want to have a look into
<a class="reference internal" href="design-principles.html#design-principles"><span class="std std-ref">Design Principles</span></a> section.</p>
<p>The compliance tool requires, at least, one directory with the
fetchers and checks. In order to learn how to use it, let’s use a
demo folder with a simple set of fetchers and checks. You can find it
at <cite>doc/demo-checks</cite>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd doc/demo-checks
$ mkvirtual env ** #TODO CHECK mkvirtual **
$ . ./env/bin/activate
$ pip install -r requirements.txt
</pre></div>
</div>
<p>A normal execution is broken down in 2 steps:</p>
<ul>
<li><p>Run the fetchers:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ compliance --fetch .
</pre></div>
</div>
<p>This executes all the fetchers located at <code class="docutils literal notranslate"><span class="pre">demo/fetchers</span></code>
and generates a git repository locally at <code class="docutils literal notranslate"><span class="pre">/$TMPDIR/compliance</span></code>.</p>
</li>
<li><p>Run the checks:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ compliance --check &#39;demo.accreditation1,demo.accreditation2&#39; .
</pre></div>
</div>
<p>This executes the checks located at <code class="docutils literal notranslate"><span class="pre">demo/checks</span></code>, creates the reports,
executes notifiers (you can see the messages in the output), and generates a
file called <code class="docutils literal notranslate"><span class="pre">check_results.json</span></code> with detailed information about the
execution.  The file is put into the evidence locker by default.</p>
</li>
</ul>
<div class="section" id="advanced-topics">
<h2>Advanced Topics<a class="headerlink" href="#advanced-topics" title="Permalink to this headline">¶</a></h2>
<div class="section" id="fetchers">
<h3>Fetchers<a class="headerlink" href="#fetchers" title="Permalink to this headline">¶</a></h3>
<p>You might want to push the evidences generated by <code class="docutils literal notranslate"><span class="pre">--fetch</span></code> into a
remote git repository. For that, you can use <code class="docutils literal notranslate"><span class="pre">--evidence</span></code> and <code class="docutils literal notranslate"><span class="pre">-C</span>
<span class="pre">setup.json</span></code>. This <code class="docutils literal notranslate"><span class="pre">setup.json</span></code> contains a fake URL of the repo, you
can edit it to match the URL you want. However, you have to provide
GitHub credentials. By default, you should use
<code class="docutils literal notranslate"><span class="pre">~/.credentials</span></code> (or use <code class="docutils literal notranslate"><span class="pre">--creds-path</span></code> to point somewhere else):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">github</span><span class="p">]</span>
<span class="n">token</span><span class="o">=</span><span class="n">XXX</span>
</pre></div>
</div>
<p>Once you have set it up, you can run the fetchers in <code class="docutils literal notranslate"><span class="pre">no-push</span></code>
mode:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ compliance --fetch --evidence no-push -C setup.json .
</pre></div>
</div>
<p>The compliance tool will <code class="docutils literal notranslate"><span class="pre">pull</span></code> the repository to
<code class="docutils literal notranslate"><span class="pre">/tmp/compliance</span></code> (only if it does not exist already), then run all
the fetchers that need to be run (i.e. those whose evidence TTL
has expired) but it will <strong>not</strong> push anything. This is handy for
testing the current state of the evidences of your remote repository.</p>
<p>If you really want to push the evidences generated:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ compliance --fetch --evidence full-remote -C setup.json .
</pre></div>
</div>
</div>
<div class="section" id="checks">
<h3>Checks<a class="headerlink" href="#checks" title="Permalink to this headline">¶</a></h3>
<p>You can also use <code class="docutils literal notranslate"><span class="pre">-C</span> <span class="pre">setup.json</span></code> to configure the check run and
tweak some components like notifiers. For example, you can use the
<code class="docutils literal notranslate"><span class="pre">slack</span></code> notifier as following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ compliance --check demo.accreditation2 --notify slack -C setup.json .
</pre></div>
</div>
<p>This will only run <code class="docutils literal notranslate"><span class="pre">demo.accreditation2</span></code> accreditation. Note that in
<code class="docutils literal notranslate"><span class="pre">setup.json</span></code> how to notify people/channels based on
accreditations. Also note that you will need to add a <code class="docutils literal notranslate"><span class="pre">webhook</span></code> into
the credentials:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">slack</span><span class="p">]</span>
<span class="n">webhook</span><span class="o">=</span><span class="n">XXX</span>
</pre></div>
</div>
<p>Slack webhooks cannot be used for posting messages into private
channels. If you need this, we recommend to use a Slack app token
instead:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">slack</span><span class="p">]</span>
<span class="n">token</span><span class="o">=</span><span class="n">XXX</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="controls-json">
<h2>controls.json<a class="headerlink" href="#controls-json" title="Permalink to this headline">¶</a></h2>
<p>The mapping between accreditations and checks happens at
<code class="docutils literal notranslate"><span class="pre">controls.json</span></code>. New checks must be included here in order to be
collected by the compliance tool. Note that this is not the same case
as in fetchers, where all of them are executed.</p>
</div>
<div class="section" id="a-few-recommendations">
<h2>A few recommendations<a class="headerlink" href="#a-few-recommendations" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Use the example project you have used above as a template:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">demo</span></code> should be replaced by the name of your unit or
organization.</p></li>
<li><p>Put your <code class="docutils literal notranslate"><span class="pre">fetchers</span></code> in a separate directory from
<code class="docutils literal notranslate"><span class="pre">checks</span></code>. Technically, there is no requirement regarding how to
organise fetchers and checks, but it is recommended to keep them
separated. As you add more fetchers and checks you can create
subdirectories.</p></li>
<li><p>For your report templates, use
<code class="docutils literal notranslate"><span class="pre">demo/templates/reports</span></code>. Remember that they should have the
same path as the report evidences.</p></li>
</ul>
</li>
<li><p>When debugging, always use the safest options for compliance
tool. This will try to prevent incidental slack notifications or
commits to your git evidence collector.</p></li>
</ul>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Quick Start</a><ul>
<li><a class="reference internal" href="#advanced-topics">Advanced Topics</a><ul>
<li><a class="reference internal" href="#fetchers">Fetchers</a></li>
<li><a class="reference internal" href="#checks">Checks</a></li>
</ul>
</li>
<li><a class="reference internal" href="#controls-json">controls.json</a></li>
<li><a class="reference internal" href="#a-few-recommendations">A few recommendations</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Auditree framework documentation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="design-principles.html"
                        title="next chapter">Design Principles</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/quick-start.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="design-principles.html" title="Design Principles"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Auditree framework documentation"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Auditree Framework 1.2.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Quick Start</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, IBM.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.2.0.
    </div>
  </body>
</html>